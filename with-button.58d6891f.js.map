{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCAMA,MAAMC,EAAO,CACXC,WAAYC,SAASC,cAAc,gBACnCC,UAAWF,SAASC,cAAc,YAClCE,YAAaH,SAASC,cAAc,eAGhCG,EAAa,IAAI,EAAAR,EAAAS,SAEvBP,EAAKC,WAAWO,iBAAiB,UAQjCC,eAAkCC,GAQhC,GAPAA,EAAIC,iBAEJC,IAEAN,EAAWO,MAAQH,EAAII,OAAOC,SAAS,YAAeC,MAAMC,OAC5DX,EAAWY,YAEc,KAArBZ,EAAWO,MAKb,OAJAb,EAAKK,YAAYc,UAAUC,IAAI,aAC/BR,SA6DFS,EAAAC,GAASC,OAAOC,QAAQ,mCAvDxB,IACE,MAAMC,QAAanB,EAAWoB,cAC9B,IAAKD,EAAKE,KAAKC,OAGb,OAFA5B,EAAKK,YAAYc,UAAUC,IAAI,kBAwDnCC,EAAAC,GAASC,OAAOM,QACd,4EArDAC,EAAaL,EAAKE,MAyDKX,EAxDLS,EAAKM,UAyDzBV,EAAAC,GAASC,OAAOS,QAAQ,oBAAoBhB,YAAiB,CAC3DiB,QAAS,MAzDTC,EAAQC,UACRC,IACApC,EAAKK,YAAYc,UAAUkB,OAAO,YACpC,CAAE,MAAOC,GACPC,QAAQC,IAAIF,EACd,CAkDF,IAA2BtB,CAjD3B,IAtCAhB,EAAKK,YAAYG,iBAAiB,SAwClCC,iBACEH,EAAWmC,gBAEX,IACE,MAAMhB,QAAanB,EAAWoB,cAK9B,GAJAI,EAAaL,EAAKE,MAClBS,IACAF,EAAQC,UACRnC,EAAKK,YAAYc,UAAUkB,OAAO,aAC9BrC,EAAKI,UAAUsC,mBAAqBjB,EAAKM,UAG3C,OAFA/B,EAAKK,YAAYc,UAAUC,IAAI,kBA4CnCC,EAAAC,GAASC,OAAOoB,KACd,6DAzCF,CAAE,MAAOL,GACPC,QAAQC,IAAIF,EACd,CACF,IAvDA,IAAIJ,EAAU,IAAIb,EAAAuB,GAAJ,CAAmB,aAAc,CAC7CC,aAAc,IACdC,aAAc,QAuDhB,SAASV,IACP,MAAQW,OAAQC,GACdhD,EAAKI,UAAU6C,kBAAkBC,wBAEnCC,OAAOC,SAAS,CACdC,IAAkB,EAAbL,EACLM,SAAU,UAEd,CAEA,SAASxB,EAAayB,GACpBvD,EAAKI,UAAUoD,mBAAmB,aAAa,EAAAC,EAAAlD,SAAkBgD,GACnE,CAEA,SAAS3C,IACPZ,EAAKI,UAAUsD,UAAY,EAC7B,C","sources":["src/js/with-btn.js"],"sourcesContent":["import PixabayAPI from './pixabay-api';\nimport createGalleryCard from '../templates/gallery-card.hbs';\nimport Notiflix from 'notiflix';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst refs = {\n  searchForm: document.querySelector('#search-form'),\n  galleryEl: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.load-more'),\n};\n\nconst pixabayAPI = new PixabayAPI();\n\nrefs.searchForm.addEventListener('submit', handelSearchImages);\nrefs.loadMoreBtn.addEventListener('click', handelLoadMore);\n\nlet gallery = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nasync function handelSearchImages(evt) {\n  evt.preventDefault();\n\n  clearImagesContainer();\n\n  pixabayAPI.query = evt.target.elements['searchQuery'].value.trim();\n  pixabayAPI.resetPage();\n\n  if (pixabayAPI.query === '') {\n    refs.loadMoreBtn.classList.add('is-hidden');\n    clearImagesContainer();\n\n    makeFailureMessageOnEmptyString();\n    return;\n  }\n\n  try {\n    const data = await pixabayAPI.fetchPhotos();\n    if (!data.hits.length) {\n      refs.loadMoreBtn.classList.add('is-hidden');\n      makeWrongMessage();\n      return;\n    }\n    renderImages(data.hits);\n    makeSuccesMessage(data.totalHits);\n    gallery.refresh();\n    smoothScroll();\n    refs.loadMoreBtn.classList.remove('is-hidden');\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function handelLoadMore() {\n  pixabayAPI.incrementPage();\n\n  try {\n    const data = await pixabayAPI.fetchPhotos();\n    renderImages(data.hits);\n    smoothScroll();\n    gallery.refresh();\n    refs.loadMoreBtn.classList.remove('is-hidden');\n    if (refs.galleryEl.childElementCount >= data.totalHits) {\n      refs.loadMoreBtn.classList.add('is-hidden');\n      makeInfoMessage();\n      return;\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } =\n    refs.galleryEl.firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction renderImages(image) {\n  refs.galleryEl.insertAdjacentHTML('beforeend', createGalleryCard(image));\n}\n\nfunction clearImagesContainer() {\n  refs.galleryEl.innerHTML = '';\n}\n\nfunction makeFailureMessageOnEmptyString() {\n  Notiflix.Notify.warning('Please, enter your search query');\n}\n\nfunction makeWrongMessage() {\n  Notiflix.Notify.failure(\n    'Sorry, there are no images matching your search query. Please try again.'\n  );\n}\n\nfunction makeSuccesMessage(value) {\n  Notiflix.Notify.success(`Hooray! We found ${value} images.`, {\n    timeout: 4000,\n  });\n}\n\nfunction makeInfoMessage() {\n  Notiflix.Notify.info(\n    \"We're sorry, but you've reached the end of search results.\"\n  );\n}\n"],"names":["$8H72y","parcelRequire","$c3960c7fd5e2ba2d$var$refs","searchForm","document","querySelector","galleryEl","loadMoreBtn","$c3960c7fd5e2ba2d$var$pixabayAPI","default","addEventListener","async","evt","preventDefault","$c3960c7fd5e2ba2d$var$clearImagesContainer","query","target","elements","value","trim","resetPage","classList","add","$parcel$interopDefault","$6JpON","Notify","warning","data","fetchPhotos","hits","length","failure","$c3960c7fd5e2ba2d$var$renderImages","totalHits","success","timeout","$c3960c7fd5e2ba2d$var$gallery","refresh","$c3960c7fd5e2ba2d$var$smoothScroll","remove","error","console","log","incrementPage","childElementCount","info","$5IjG7","captionDelay","captionsData","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","image","insertAdjacentHTML","$86MAb","innerHTML"],"version":3,"file":"with-button.58d6891f.js.map"}